image: nixos/19.09
repositories:
  nixpkgs: https://nixos.org/channels/nixos-19.09
environment:
  python_version: python36
sources:
  - https://git.sr.ht/~pvsr/qpm
tasks:
  - test: |
      cd qpm
      nix-shell --quiet -p $python_version \
        ${python_version}Packages.pyxdg \
        ${python_version}Packages.pytest \
        --run "python -m pytest"
